<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Subjects</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
</head>

<body>
    <%- include('header', {user}) %>

    <h2>–ü—Ä–µ–¥–º–µ—Ç: <a href="/teacher/subjects/<%= subject.id %>/"><u><%= subject.name %></u></a></h2>
    <h2>–ó–∞–Ω—è—Ç—Ç—è: <i><%= lesson.name %></i></h2>
    <h2>–ñ—É—Ä–Ω–∞–ª</h2>

    <div class="adaptive-row-flex">
        <table class="marks-table">
            <thead>
                <tr>
                    <th>–°—Ç—É–¥–µ–Ω—Ç</th>
                    <th>–û—Ü—ñ–Ω–∫–∞</th>
                    <th>–ü—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å</th>
                    <th>–î—ñ—ó</th>
                </tr>
            </thead>
            <tbody>
                <% marks.forEach(mark=> { %>
                    <tr>
                        <td>
                            <%= mark.student.name %>
                        </td>
                        <td>
                            <input type="number" name="mark" placeholder="-" value="<%= mark.mark %>"
                                min="0" max="100" form="updateForm-<%= mark.id %>" />
                        </td>
                        <td>
                            <input type="checkbox" name="attendance" <%=mark.attendance ? 'checked' : '' %>
                                form="updateForm-<%= mark.id %>" />
                        </td>
                        <td>
                            <form id="updateForm-<%= mark.id %>" action="marks/<%= mark.id %>/update" method="post" class="inline-form">
                                <button type="submit">–û–Ω–æ–≤–∏—Ç–∏</button>
                            </form>
                            <form action="marks/<%= mark.id %>/delete" method="post" class="inline-form">
                                <button type="submit">üóëÔ∏è</button>
                            </form>
                        </td>
                    </tr>
                <% }) %>
            </tbody>
        </table>

        <div class="sticky">
            <div class="fine-box">
                <h2>–î–æ–¥–∞—Ç–∏ –æ—Ü—ñ–Ω–∫—É</h2>
                <form action="marks/create" method="post">
                    <select name="studentId" required>
                        <% students.forEach(student=> { %>
                            <option value="<%=student.id%>">
                                <%=student.name%>
                            </option>
                            <% }) %>
                    </select>
                    <input type="number" name="mark" placeholder="–û—Ü—ñ–Ω–∫–∞" style="width: 8ch;" min="0" max="100" />
                    <label>–ü—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å:
                        <input type="checkbox" name="attendance" />
                    </label>

                    <input type="hidden" name="lessonId" value="<%=lesson.id%>" />

                    <button type="submit">–î–æ–¥–∞—Ç–∏ –æ—Ü—ñ–Ω–∫—É</button>
                </form>
            </div>
        </div>

    </div>


</body>

</html>