<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lessons</title>
    <link rel="stylesheet" href="/stylesheets/style.css" />
</head>

<body>
    <%- include('header', {user}) %>

    <h2>–ü—Ä–µ–¥–º–µ—Ç: <u><%= subject.name %></u></h2>

    <div class="adaptive-row-flex">
        <div class="lessons">
            <h2>–¢–µ–º–∏ –∑–∞–Ω—è—Ç—å</h2>
            <div class="lessons-list">
                <% lessons.forEach(lesson => { %>
                    <div class="lesson">
                        <div class="lesson-info">
                            <p><%= lesson.date %></p>
                            <hr>
                            <a href="lessons/<%= lesson.id %>/"><%= lesson.name %></a>
                        </div>

                        <form action="lessons/<%= lesson.id %>/delete" method="post" class="inline-form">
                            <button type="submit">üóëÔ∏è</button>
                        </form>
                    </div>
                <% }) %>
                <form action="lessons/create" method="post" class="fine-box">
                    <input type="text" name="name" placeholder="–ù–∞–∑–≤–∞" required />
                    <input type="date" name="date" placeholder="–î–∞—Ç–∞" required />
                    <input type="hidden" name="subjectId" value="<%=subject.id%>" />

                    <button type="submit">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–Ω—è—Ç—Ç—è</button>
                </form>
            </div>
        </div>

        <div class="students">
            <h2>–°—Ç—É–¥–µ–Ω—Ç–∏ –∫—É—Ä—Å—É</h2>
            <ul>
                <% students.enrolled.forEach(student => { %>
                    <li><%=student.name%>
                        <form action="unenrollStudent" method="post" class="inline-form">
                            <input type="hidden" name="studentId" value="<%=student.id%>" />
                            <input type="hidden" name="subjectId" value="<%=subject.id%>" />
                            <button style="border-radius: 8px; margin-left: 4px;" type="submit">üóëÔ∏è</button>
                        </form>
                    </li>
                <% }) %>
            </ul>

            <div class="fine-box">
                <form action="enrollStudent" method="post">
                    <select name="studentId" required>
                        <% students.unenrolled.forEach(student => { %>
                            <option value="<%=student.id%>"><%=student.name%></option>
                        <% }) %>
                    </select>
                    <input type="hidden" name="subjectId" value="<%=subject.id%>" />
                    <button type="submit">–î–æ–¥–∞—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞</button>
                </form>
            </div>
        </div>
    </div>



</body>

</html>